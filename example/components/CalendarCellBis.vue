<template>
  <button
    class="calendar-cell"
    :class="rootClasses"
    v-on="dateListeners"
  >
    {{ date.day }}
  </button>
</template>

<script>
  export default {
    name: 'CalendarCellBis',
    inheritAttrs: false,
    props: {
      date: {
        required: true,
        type: Object
      },
      isSelected: {
        default: false,
        type: Boolean
      },
      isDisabled: {
        default: false,
        type: Boolean
      },
      isBetween: {
        default: false,
        type: Boolean
      },
      isOneDayBefore: {
        default: false,
        type: Boolean
      },
      isOneDayAfter: {
        default: false,
        type: Boolean
      },
      isLast: {
        default: false,
        type: Boolean
      },
      isFirst: {
        default: false,
        type: Boolean
      },
      isOneDayBeforeFirst: {
        default: false,
        type: Boolean
      },
      isOneDayBeforeLast: {
        default: false,
        type: Boolean
      }
    },
    computed: {
      dateListeners() {
        const vm = this;
        return Object.assign({},
          this.$listeners,
          {
            click() {
              return vm.$listeners.click(vm.date);
            }
          }
        );
      },
      rootClasses() {
        return {
          '--is-other-month-day': this.date.isOtherMonthDay,
          '--selected': this.date.isSelected,
          '--weekend': this.date.isWeekend,
          '--disabled': this.isDisabled,
          '--between': this.isBetween,
          '--first': this.isFirst,
          '--last': this.isLast,
          '--one-day-before': this.isOneDayBefore,
          '--one-day-after': this.isOneDayAfter,
          '--one-day-before-first': this.isOneDayBeforeFirst,
          '--one-day-before-last': this.isOneDayBeforeLast
        };
      }
    }
  };
</script>

<style scoped lang="scss">
  $cell-width: 40px;
  $cell-height: 40px;
  $radius: 3px;
  
  $color-primary: #387FBF;
  $color-accent: #FF8A00;
  $light-gray: #f7f7f9;
  
  .calendar-cell {
    border-radius: 3px;
    border: none;
    appearance: none;
    margin: 2px 0;
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    height: $cell-height;
    width: $cell-width;
    font-size: 12px;
    font-weight: 600;
    cursor: pointer;
    position: relative;
    color: #50696d;
    background-color: transparent;
    
    
    &:not(.--disabled):not(.--selected):hover {
      background-color: #9ea4b5;
      color:  $light-gray;
    }
    &.--disabled:not(.--between) {
      opacity: .1;
    }
    &.--between {
      background-color: $light-gray;
      border-radius: 0;
    }
    &.--weekend {
      color: $color-primary;
    }
    &.--selected {
      background-color: lighten($color-primary, 15%);
      border-radius: 0;
    }
    &.--is-other-month-day:not(.--disabled):not(.--between):not(.--selected) {
      opacity: .5;
    }
    &:focus:not(.--selected) {
      outline: none;
      background-color: $light-gray;
      opacity: 1;
    }
    &.--between:focus {
      background-color: darken($light-gray, 3%);
    }
    &.--selected:focus {
      outline: none;
      background-color: darken($light-gray, 10%);
    }
  }

  .price {
    display: block;
    color: #383838;
    font-size: 10px;
  }

  .calendar-cell.--selected {
    .price {
      color: #fff;
    }
  }
  
</style>
